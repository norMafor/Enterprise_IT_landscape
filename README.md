IT-инфаструктура предприятия - Такие разные, но такие одинаковые
Аннотация: В данном проекте ты построишь несколько ИТ-инфраструктур малых предприятий и спроектируешь их защиту, узнаешь про триаду CIA и вспомнишь про сетевые топологии.

Содержание


Chapter I 
1.1. Рекомендации к проекту


Chapter II 
2.1. ИТ-инфраструктура предприятия


Chapter III 
3.1. Задание 1. Типовая структура предприятия 
3.2. Задание 2. Инвентаризация активов 
3.3. Задание 3. Защита предприятия 
3.4. Задание 4. Дополнительное задание



Введение

Сон — работа — сон. Дни Ираклиона проходили, словно вагоны поезда, монотонно и одинаково. Ему всегда казалось, что жизнь должна быть ради великой цели, но смелости бросить всё никак не набирался.
Каждое утро он выходил наружу для поиска еды, а возвращался до заката солнца. Ираклион — муравей. Не в переносном смысле, а в самом что ни на есть прямом. Его поражало, как такое количество весьма небольших существ могут работать сообща и поддерживать структуру своего общества. Но его манили свобода, бесконечные просторы и приключения за пределами муравейника.


Chapter I

Рекомендации к проекту
Как учиться в «Школе 21»:

На протяжении всего курса ты будешь самостоятельно добывать информацию. Пользуйся всеми доступными средствами поиска информации, к примеру, Google и GigaChat. Будь внимателен к источникам информации: проверяй, думай, анализируй, сравнивай.
Взаимообучение (P2P, Peer-to-Peer) — это процесс, при котором учащиеся обмениваются знаниями и опытом, выступая одновременно в роли учителей и учеников. Этот подход позволяет учиться не только у преподавателя, но и друг у друга, что способствует более глубокому пониманию материала.
Не стесняйся просить помощи: вокруг тебя такие же пиры, которые тоже проходят этот путь впервые. Не бойся откликаться на просьбы о помощи. Твой опыт ценен и полезен, смело делись им с другими участниками.
Не списывай, а если пользуешься помощью — всегда разбирайся до конца, почему, как и зачем. Иначе твое обучение не будет иметь никакого смысла.
Если ты на чем-то застрял и кажется, что ты уже все перепробовал, но все равно непонятно, куда идти, — просто передохни! Поверь, этот совет помогал многим экспертам по КБ в их работе. Проветрись, перезагрузи голову, и, возможно, в следующий раз тебе наконец придет нужное решение!
Важен не только результат обучения, но и сам процесс. Нужно не просто решить задачу, а понять, КАК ее решить.
На пути к мастерству в сфере кибербезопасности ты получаешь возможность быть частью поддерживающего и вдохновляющего сообщества Школы 21 по Кибербезопасности. Присоединяйся в RocketChat,чтобы получать свежие анонсы от сообщества,а так же вступай в Telegram для коммуникации.

Как работать с проектом:

Перед выполнением проект необходимо склонировать с GitLab в одноименный репозиторий.
Все файлы с кодом необходимо создавать в папке src склонированного репозитория.
После клонирования проекта необходимо создать ветку develop и вести разработку в ней. После этого пушить в GitLab также нужно ветку develop.
В твоей директории не должно быть иных файлов, кроме тех, что обозначены в заданиях.

Дисклеймер:

В целях геймификации обучения проект подается в формате истории, чтобы у тебя была возможность отвлечься от сложных заданий и тонны теории в гугле. Если придуманная история кажется тебе бесталанной и скучной, можно указать на это в обратной связи, чтобы автор поплакал над своим писательским навыком. Также можно пропускать введение в каждом задании и фокусироваться только на содержательной части.


Chapter II

ИТ-инфраструктура предприятия
Когда произносят фразу «инфраструктура предприятия», обычно подразумевают совокупность ИТ-продуктов: сетевые компоненты, аппаратные и программные платформы, информационные системы и т. д.
Соответственно, с точки зрения информационной безопасности именно защита ИТ-инфраструктуры предприятия является одной из главных целей. Этот факт диктует следующие постулаты для обеспечения защиты ИТ-инфраструктуры:

Безопасность — это процесс, который никогда не стоит на месте, ровно как и ИТ-инфраструктура никогда не стоит на месте (постоянно ставится новое ПО, заменяются аппаратные платформы/сервера/АРМы).
Безопасность должна быть многоуровневой. Недостаточно поставить один WAF и надеяться, что этого хватит, чтобы обезопасить веб-приложение. Роль играет безопасность на каждом уровне.

Чтобы не хвататься за все аспекты безопасности сразу, можно использовать «три кита» информационной безопасности, которые выступают ориентирами того, что должно быть сделано в первую очередь. Итак, встречайте:

Конфиденциальность;
Целостность;
Доступность.

Ты уже наверняка знаешь эти столпы ИБ (их еще называют триада CIA). На всякий случай раскроем каждый из них.
Конфиденциальность — доступ к информации должны иметь только авторизованные субъекты.
Целостность — информация должна быть точная и достоверная.
Доступность — авторизованному субъекту гарантировано, что он сможет получить доступ к информации в любой момент.
Защищенной ИТ-инфраструктурой может считаться только та, в которой все эти столпы выполняются.
Чтобы детально познакомиться с тем, как строится ИТ-инфраструктура, общими принципами, а также с текущими стандартами в этой области, рекомендую одно из множества методических пособий по ИТ-инфраструктуре (только главы, посвященные изучаемой теме):
https://books.yandex.ru/books/J1Z4Lo3s

Chapter III

Задание 1. Типовая структура предприятия
Для решения данного задания нужны знания в следующих темах: app.diagrams.net, иконки устройств, сетевые топологии, структурная схема ЛВС.

Во время одной из вылазок Ираклион впервые увидел пчел. Они кружили вокруг цветов, резвились в воздухе и казались самыми беззаботными и свободными существами в мире. Это впечатлило муравья до такой степени, что он твердо решил стать таким же, как пчелы.
Дождавшись, пока его сородичи уйдут в муравейник, Ираклион последовал за пчелами. Ближе к вечеру он наконец добрался до улья на дереве — оплота свободы. Однако забраться туда он не мог, поэтому решил дождаться утра под ближайшими листьями.
Там его ждал сюрприз: одна из пчел с поврежденными крыльями не могла подняться в улей. Вся следующая ночь муравья прошла в расспросах пчелы об устройстве их типичной структуры общества.

Типовая структура предприятия очень сильно зависит от отрасли и особенностей компании, даже если мы ограничимся только ИТ-частью. К сожалению, «типовая» не значит «хорошо выстроенная», поэтому выберем абстрактные блоки, которые будут присутствовать практически в любой ИТ-инфраструктуре предприятия. За основу возьмем малый бизнес, 10–15 сотрудников, сфера деятельности: разработка ПО. В крупных мегакорпорациях мы встретим те же блоки, только с сотнями и тысячами устройств в каждом.
Из чего же, из чего же, из чего же сделаны наши ИТ-инфраструктуры?

Серверно-вычислительная часть. Из названия понятно, что речь про сервера / облачные вычисления / гипервизоры. Это одна из самых затратных, но в то же время самых полезных частей любой инфраструктуры. С точки зрения безопасности данный сегмент должен быть за каменной стеной, поскольку обработка критически важной информации (для каждой компании она своя, даже если речь не идет о персональных данных) происходит именно здесь.
Сетевое оборудование. Без сетевого оборудования невозможна сегментация сети. И даже в самом маленьком офисе 5 на 5 квадратных метров можно и нужно организовать хотя бы 2 виртуальных сети, чтобы отделить сотрудников от серверно-вычислительной части.
Корпоративная часть (не является обязательной, т. к. могут использоваться аутсорс / облачные системы). Здесь можно расположить всё необходимое ПО для функционирования внутренних процессов компании: ERP-системы, CRM-системы, система документооборота.
Сегмент/сегменты сотрудников. Эта часть может состоять как из физических АРМов уважаемых коллег, так и из терминальных серверов, если уважаемые коллеги работают из дома.
DMZ-сегмент. Абсолютно необходим, если компания так или иначе предоставляет доступ клиентам к своим продуктам из внешней сети.

Все вышеописанные сегменты могут дробиться/дополняться/оспариваться, но они являются показателями того, что внутри структуры предприятия существует множество частей, которые требуют абсолютно разного подхода к обеспечению безопасности.
Конечно, ко всей инфраструктуре предприятия в целом предъявляются определенные требования в зависимости от типа информационной системы (на данный момент их 4 штуки), входящей в состав этой инфраструктуры. Чтобы чуть глубже погрузиться в тему, можно прочитать короткую статью на эту тему: https://habr.com/ru/articles/734526/.
Однако даже внутри одного предприятия подход к защите должен отличаться. Для примера возьмем DMZ-сегмент. Это часть с самым высоким уровнем риска, поэтому ко всем устройствам/соединениям должна применяться политика Zero Trust. Чего нельзя сказать о серверно-вычислительной части, в которой заблокировать все порты = положить всю инфраструктуру компании.
Важно понять, что обеспечить безопасность ИТ-инфраструктуры — очень нетривиальная задача, в которой нужно руководствоваться:

здравым смыслом;
требованиями регулятора;
стандартами, если таковые имеются;
балансом между удобным функционированием всех процессов и достаточным уровнем ИБ.

Твое задание: для начала попробуй себя в роли архитектора, с нуля построив структурную схему ЛВС организации по заданному списку активов (файл typical_org.xlsx). Задание необходимо выполнить в app.diagrams.net и получившийся файл с названием result_topology.drawio загрузить на гит. Основные требования к построенной схеме:

Общепринятые обозначения узлов. Никаких кружочков/квадратиков/абстрактных фигур.
Покажи связи между устройствами.
IP-адреса, порты и FQDN устройств указывать в схеме не обязательно.


Задание 2. Инвентаризация активов
Для решения данного задания нужны знания в следующих темах: IP-адреса, маска подсети, оборудование CISCO, служба каталогов Active Directory, домен.

— Видишь, как всё оказалось непросто, — сказала пчела после долгого разговора.
— Да, вы тоже каждый день делаете вылазки, и у вас тоже есть матка, но вы можете летать! И улететь, куда захотите, при любой возможности.
— У тебя тоже была возможность идти, куда захочешь, когда ты ушел из муравейника.
— Да, но мне хотелось свободы, как у вас, это другое, — отмахнулся Ираклион.
— Нет, в этом всё и дело. Все гонятся за свободой, но как только получают ее, начинают искать нового хозяина, чтобы вручить ему свою свободу. Вот только почему-то в себе они этого хозяина не находят. Запомни, муравей, ты свободен ровно настолько, насколько сам решаешь быть свободным. Порядок — это не тюрьма. Быть вместе с кем-то — это тоже не тюрьма. А если тюрьма у тебя в голове, то ни одно свободное общество, будь то пчелиный улей или муравьиное гнездо, не даст тебе того, что ты хочешь.
Этот разговор абсолютно перевернул жизнь Ираклиона с лапок на голову. Уже светало. Муравей вдруг понял, что его дом там, а не здесь. Как только первые лучи солнца показались на горизонте, он вскочил и побежал к своим.

Может показаться, что инвентаризация активов — это что-то про государственные НИИ или в крайнем случае муниципальные/областные информационные системы. Однако такое суждение может стать критической ошибкой и перерасти в бардак не только для ИТ-службы, но и для информационной безопасности.
Любая организация должна в любой момент времени с максимальной точностью знать свои информационные активы — от количества серверов до количества лицензий 1С. Процесс сбора информации об активах и называют инвентаризацией.
Как правило, инвентаризацию проводят с помощью специального ПО, с графиками, в автоматическом/автоматизированном режиме. Затем на основе этой информации уже можно принимать дальнейшие решения, например, осуществлять патч-менеджмент или закупку лицензий новомодного EDR. Другими словами, инвентаризация активов — первый и очень важный шаг для построения стратегии защиты всей ИТ-инфраструктуры и бизнес-процессов компании.
Все секреты по управлению ИТ-активами, в том числе по проведению инвентаризации, уложились всего лишь в несколько томов под названием ITIL:
https://www.tutorialspoint.com/itil/itil_tutorial.pdf
Читать от корки до корки вовсе не обязательно, но ознакомиться и иметь общее представление определенно стоит.
После роли архитектора настала пора вручную провести инвентаризацию. К сожалению, делать это придется по произвольной схеме инфраструктуры.
Твое задание:  сделай таблицу инвентаризации активов на основе предоставленной информации в файле not_really_typical_org. Итоговую таблицу сохрани в файл My_inventory.xlsx.
Требования к таблице инвентаризации:
Должна присутствовать следующая информация о каждом активе:

Установленная ОС с версией;
Установленное ПО с версиями;
Сетевой адрес, маска подсети;
Учетные записи и их права (как доменные, так и локальные);
Принадлежность к домену (если имеется — указать название).

Примечание: в столбце установленного ПО необходимо указать хотя бы 1 софт, соответствующий функционалу устройства, за исключением сетевых устройств. Данный столбец пригодится в дальнейшем, поэтому прояви воображение. В реальности ручная инвентаризация составляется с помощью удаленного выполнения кода на каждом устройстве с запросом установленного ПО/пакетов.

Задание 3. Защита предприятия
Для решения данного задания нужны знания в следующих темах: виды СЗИ, VPN, антивирусное ПО, защита конечных точек Windows/Linux.

Подбегая к знакомой опушке, Ираклион начал слышать странные звуки. Это были звуки боя. Он и до этого чуял незнакомый запах, но теперь отчетливо его разобрал: это муравьи из соседнего леса, видимо, устроили набег на его родной муравейник.
Ираклион начал бежать еще быстрее, в надежде успеть помочь товарищам защитить их дом. Подоспел он как раз вовремя, битва была в самом разгаре. Не задумываясь, муравей прыгнул в самую гущу сражения и сражался до самого вечера.
После того как бой был окончен и муравьи отбились, Ираклион, уже абсолютно без сил, на мгновенье остановился у входа в муравейник.
— А все-таки пчелой быть лучше, — ехидно заключил он.

Финальной стадией построения ИТ-инфраструктуры является обеспечение ее безопасности, хотя, конечно, необходимые СЗИ должны закладываться еще на этапе проектирования. Самой сложной частью этого процесса является сопровождение, поскольку важно не только «перекрывать» периодически меняющуюся модель угроз, но и ничего не сломать в работающих процессах.
В каждом конкретном случае использование СЗИ должно регламентироваться классом защиты информационной системы, а также критичностью отдельных сегментов.
Еще одним препятствием к здоровому сну безопасника является ГОССОПКА. К этой системе необходимо подключаться только государственным компаниям и КИИ (критической информационной инфраструктуре).
Однако если опустить все эти моменты, то обеспечение безопасности ИТ-инфраструктуры строится из трех частей.

Обеспечение безопасности конечных точек (так называемый hardening). Осуществляется путем правильной настройки встроенных средств защиты операционной системы, а также установкой антивирусов/endpoint protection систем/IDPS/DLP (нужное подчеркнуть).
Обеспечение безопасности сети. Это настройка файрволов, маршрутизаторов, АПКШ, VPN и в отдельных случаях NTA.
Обеспечение безопасности приложений. Настройка WAF, шифрование бэкапов / баз данных и т. д.

Этот список далеко не окончательный, но пока ты проходишь этот проект, скорее всего, появилось новое решение для защиты чего-нибудь, поэтому руководствоваться нужно принципом минимальной достаточности, иначе весь бюджет компании будет уходить на покупку новых лицензий/софта.
Твое задание: чтобы почувствовать себя в роли CISO, предлагаем тебе продумать обеспечение безопасности уже готовой ИТ-инфраструктуры. В качестве ориентира используй минимум 3 вида СЗИ:

Антивирусы (любого класса. В случае Linux — встроенные средства защиты);
Межсетевые экраны (любого класса);
VPN;
Наличие остальных на твое усмотрение.

Размести СЗИ в инфраструктуре из файла not_really_typical_org и дополни файл инвентаризации информацией о добавленных средствах защиты информации в отдельной колонке. В итоге залей на гит обновленную схему protected_typical_org и обновленный файл инвентаризации protected_typical_inventory.

Задание 4. Дополнительное задание
Твое задание (творческое): к построенной типовой схеме, разработанной тобой в 1 задании, добавь 3 удаленщика. Также сделай изолированный сегмент в офисе с двумя серверами, к которым имеют доступ только удаленщики по защищенному каналу связи. Предусмотри терминальный сервер.
Получившуюся схему new_result_topology залей на гит.
